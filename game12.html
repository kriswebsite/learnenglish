<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category Collector Game</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-100">

    <!-- Navigation Bar -->
    <nav class="bg-gray-800 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Brand -->
                <div class="flex-shrink-0">
                    <a href="index.html" class="text-xl font-bold">Learn and Play</a>
                </div>
                <!-- Hamburger Menu (Mobile) -->
                <div class="flex lg:hidden">
                    <button id="navbar-toggle" class="text-gray-300 hover:text-white focus:outline-none focus:text-white">
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
                <!-- Menu -->
                <div class="hidden lg:block">
                    <ul class="flex space-x-4">
                        <li><a href="intro.html" class="hover:bg-gray-700 px-3 py-2 rounded-md">Lessons</a></li>
                        <li class="relative group">
                            <button class="flex items-center hover:bg-gray-700 px-3 py-2 rounded-md">
                                Games
                                <svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <!-- Dropdown Menu -->
                            <ul class="absolute left-0 mt-2 w-40 bg-gray-700 rounded-md shadow-lg hidden group-hover:block">
                                <li><a href="game1.html" class="block px-4 py-2 hover:bg-gray-600">Game 1</a></li>
                                <li><a href="game2.html" class="block px-4 py-2 hover:bg-gray-600">Game 2</a></li>
                                <li><a href="game3.html" class="block px-4 py-2 hover:bg-gray-600">Game 3</a></li>
                                <li><a href="game11.html" class="block px-4 py-2 hover:bg-gray-600">Grammar Ninja</a></li>
                                <li><a href="game12.html" class="block px-4 py-2 hover:bg-gray-600">Category Collector</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="navbar-menu" class="lg:hidden hidden bg-gray-800">
            <ul class="px-2 pt-2 pb-3 space-y-1">
                <li><a href="intro.html" class="block px-3 py-2 rounded-md hover:bg-gray-700">Lessons</a></li>
                <li class="relative">
                    <button class="w-full text-left px-3 py-2 rounded-md hover:bg-gray-700 flex items-center justify-between">
                        Games
                        <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <!-- Dropdown Menu -->
                    <ul class="mt-1 space-y-1 pl-4">
                        <li><a href="game1.html" class="block px-3 py-2 rounded-md hover:bg-gray-600">Game 1</a></li>
                        <li><a href="game2.html" class="block px-3 py-2 rounded-md hover:bg-gray-600">Game 2</a></li>
                        <li><a href="game3.html" class="block px-3 py-2 rounded-md hover:bg-gray-600">Game 3</a></li>
                        <li><a href="game11.html" class="block px-3 py-2 rounded-md hover:bg-gray-600">Grammar Ninja</a></li>
                        <li><a href="game12.html" class="block px-3 py-2 rounded-md hover:bg-gray-600">Category Collector</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Back to Games Button -->
    <div class="max-w-4xl mx-auto px-4 pt-4">
        <a href="games.html" class="inline-flex items-center text-blue-600 hover:text-blue-800">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7" />
            </svg>
            Back to Games
        </a>
    </div>
    
    <!-- Main Game Container -->
    <div id="root" class="p-4 sm:p-8"></div>

    <!-- JavaScript for Navbar Toggle -->
    <script>
        /**
         * Function to toggle the mobile navbar menu.
         */
        function toggleNavbarMenu() {
            const navbarMenu = document.getElementById('navbar-menu');
            navbarMenu.classList.toggle('hidden');
        }

        /**
         * Event listener for the navbar toggle button.
         */
        document.getElementById('navbar-toggle').addEventListener('click', toggleNavbarMenu);
    </script>

    <!-- Game Script -->
    <script type="text/babel">
        // Icon components
        const CrownIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" className={`w-6 h-6 ${className}`} fill="currentColor" viewBox="0 0 24 24">
                <path d="M2 7l5 5 5-5 5 5 5-5v13H2V7z" />
            </svg>
        );

        const StarIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" className={`w-6 h-6 ${className}`} fill="currentColor" viewBox="0 0 24 24">
                <polygon points="12 17.27 18.18 21 15.89 13.47 21.64 8.63 13.81 8.13 12 1 10.19 8.13 2.36 8.63 8.11 13.47 5.82 21 12 17.27" />
            </svg>
        );

        // Card components
        const Card = ({ className, children }) => (
            <div className={`bg-white rounded-lg shadow ${className}`}>
                {children}
            </div>
        );

        const CardHeader = ({ children }) => (
            <div className="border-b px-4 py-2">
                {children}
            </div>
        );

        const CardTitle = ({ className, children }) => (
            <h2 className={`text-xl font-bold ${className}`}>
                {children}
            </h2>
        );

        const CardContent = ({ children }) => (
            <div className="p-4">
                {children}
            </div>
        );

        // Button component
        const Button = ({ className, onClick, disabled, children }) => (
            <button
                onClick={onClick}
                disabled={disabled}
                className={`px-4 py-2 rounded ${disabled ? 'opacity-50 cursor-not-allowed' : ''} ${className}`}
            >
                {children}
            </button>
        );

        // The Category Collector Game Component
        const CategoryCollectorGame = () => {
            const [currentCategory, setCurrentCategory] = React.useState('');
            const [options, setOptions] = React.useState([]);
            const [score, setScore] = React.useState(0);
            const [highScore, setHighScore] = React.useState(0);
            const [streak, setStreak] = React.useState(0);
            const [gameStarted, setGameStarted] = React.useState(false);
            const [selectedAnswer, setSelectedAnswer] = React.useState(null);
            const [isCorrect, setIsCorrect] = React.useState(null);

            const categories = {
                Animals: ['dog', 'cat', 'lion', 'elephant', 'monkey', 'giraffe', 'zebra', 'panda', 'penguin', 'dolphin', 'pig', 'cow', 'sheep', 'horse', 'rabbit', 'bird', 'parrot', 'chicken', 'fox', 'hedgehog', 'goldfish', 'frog', 'snake', 'turtle', 'deer', 'donkey', 'crocodile'],
                Fruits: ['apple', 'banana', 'orange', 'mango', 'pear', 'grape', 'kiwi', 'pineapple', 'coconut'],
                Vegetables: ['carrot', 'tomato', 'potato', 'onion', 'cucumber', 'broccoli', 'corn', 'pepper', 'bean'],
                Clothes: ['shirt', 'pants', 'dress', 'coat', 'jacket', 'sweater', 'skirt', 'socks', 'shoes', 'hat'],
                Toys: ['toy_car', 'toy_robot', 'toy_train', 'toy_truck', 'toy_bike', 'toy_ball', 'toy_block', 'toy_doll', 'toy_kite', 'teddy_bear'],
                'School Items': ['pencil', 'pen', 'eraser', 'ruler', 'book', 'paper', 'scissors', 'school_bag', 'backpack'],
                Furniture: ['chair', 'table', 'bed', 'sofa', 'desk', 'lamp'],
                'Kitchen Items': ['cup', 'plate', 'bowl', 'pan', 'pot', 'knife', 'glass']
            };

            // Helper function to get image extension
            const getImageExtension = (item) => {
                // Special cases for images with specific extensions
                if (['mango', 'onion', 'pear', 'pepper', 'potato'].includes(item)) {
                    return '.jpg';
                }
                // Default extension
                return '.webp';
            };

            const generateQuestion = () => {
                const categoryKeys = Object.keys(categories);
                const randomCategory = categoryKeys[Math.floor(Math.random() * categoryKeys.length)];
                
                const correctItems = categories[randomCategory];
                const correctAnswer = correctItems[Math.floor(Math.random() * correctItems.length)];
                
                let wrongOptions = [];
                const otherCategories = categoryKeys.filter(cat => cat !== randomCategory);
                
                for (let i = 0; i < 3; i++) {
                    const randomCat = otherCategories[Math.floor(Math.random() * otherCategories.length)];
                    const randomItem = categories[randomCat][Math.floor(Math.random() * categories[randomCat].length)];
                    wrongOptions.push(randomItem);
                }
                
                const allOptions = [correctAnswer, ...wrongOptions].sort(() => Math.random() - 0.5);
                
                setCurrentCategory(randomCategory);
                setOptions(allOptions);
                setSelectedAnswer(null);
                setIsCorrect(null);
            };

            const handleAnswer = (answer) => {
                if (selectedAnswer !== null) return;
                
                const correct = categories[currentCategory].includes(answer);
                setSelectedAnswer(answer);
                setIsCorrect(correct);
                
                if (correct) {
                    setScore(score + 1);
                    setStreak(streak + 1);
                    if (score + 1 > highScore) {
                        setHighScore(score + 1);
                    }
                } else {
                    setStreak(0);
                }
                
                setTimeout(generateQuestion, 1500);
            };

            const startGame = () => {
                setGameStarted(true);
                setScore(0);
                setStreak(0);
                generateQuestion();
            };

            const getOptionStyle = (option) => {
                if (selectedAnswer === null) return 'bg-white hover:bg-gray-100';
                if (categories[currentCategory].includes(option)) {
                    return 'bg-green-500 text-white';
                }
                if (selectedAnswer === option && !categories[currentCategory].includes(option)) {
                    return 'bg-red-500 text-white';
                }
                return 'bg-gray-100';
            };

            return (
                <Card className="w-full max-w-2xl mx-auto mt-8">
                    <CardHeader>
                        <CardTitle className="text-center text-2xl">Category Collector</CardTitle>
                    </CardHeader>
                    <CardContent>
                        {!gameStarted ? (
                            <div className="text-center">
                                <p className="mb-4">Test your knowledge by matching items to their correct categories!</p>
                                <Button onClick={startGame} className="bg-blue-500 hover:bg-blue-600 text-white">
                                    Start Game
                                </Button>
                            </div>
                        ) : (
                            <div className="space-y-4">
                                <div className="flex justify-between items-center mb-4">
                                    <div className="flex items-center gap-2">
                                        <CrownIcon className="text-yellow-500" />
                                        <span>High Score: {highScore}</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <StarIcon className="text-yellow-500" />
                                        <span>Score: {score}</span>
                                    </div>
                                    <div>Streak: {streak}ðŸ”¥</div>
                                </div>
                                
                                <div className="text-center mb-6">
                                    <h3 className="text-xl font-bold mb-2">Find the {currentCategory}</h3>
                                </div>
                                
                                <div className="grid grid-cols-2 gap-4">
                                    {options.map((option, index) => (
                                        <Button
                                            key={index}
                                            onClick={() => handleAnswer(option)}
                                            disabled={selectedAnswer !== null}
                                            className={`p-4 rounded-lg border transition-colors ${getOptionStyle(option)}`}
                                        >
                                            <div className="flex flex-col items-center gap-2">
                                                <img 
                                                    src={`images/${option}${getImageExtension(option)}`}
                                                    alt={option}
                                                    className="w-16 h-16 object-cover rounded"
                                                    onError={(e) => {
                                                        e.target.onerror = null;
                                                        e.target.src = 'https://via.placeholder.com/100';
                                                    }}
                                                />
                                                <span className="capitalize">{option.replace(/_/g, ' ')}</span>
                                            </div>
                                        </Button>
                                    ))}
                                </div>
                            </div>
                        )}
                    </CardContent>
                </Card>
            );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CategoryCollectorGame />);
    </script>
</body>
</html>
